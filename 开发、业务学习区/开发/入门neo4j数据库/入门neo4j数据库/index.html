<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>入门neo4j数据库 - ConsT27's Blog</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\u5165\u95e8neo4j\u6570\u636e\u5e93", url: "#_top", children: [
          ]},
          {title: "\u7b80\u4ecb", url: "#_1", children: [
              {title: "RDBMS \u4e0e GDBMS", url: "#rdbms-gdbms" },
          ]},
          {title: "\u6570\u636e\u6a21\u578b", url: "#_2", children: [
          ]},
          {title: "CQL", url: "#cql", children: [
              {title: "CQL \u6570\u636e\u7c7b\u578b", url: "#cql_1" },
              {title: "CREATE\\\u0026amp;MERGE", url: "#createmerge" },
              {title: "SET", url: "#set" },
              {title: "MATCH\\\u0026amp;RETURN", url: "#matchreturn" },
              {title: "\u5173\u7cfb", url: "#_3" },
              {title: "WHERE", url: "#where" },
              {title: "DELETE\\\u0026amp;REMOVE", url: "#deleteremove" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../../%E6%9D%82%E6%8A%80/%E6%9D%82%E6%8A%80/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../../%E6%9D%82%E6%8A%80/%E6%9D%82%E6%8A%80/" class="btn btn-xs btn-link">
        杂技
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../%E5%BC%80%E5%8F%91/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../%E5%BC%80%E5%8F%91/" class="btn btn-xs btn-link">
        开发
      </a>
    </div>
    
  </div>

    

    <h1 id="neo4j">入门neo4j数据库</h1>
<h1 id="_1">简介</h1>
<h2 id="rdbms-gdbms">RDBMS 与 GDBMS</h2>
<p>RDBMS 是以 表、行、列存储数据的数据库；GDBMS是以图形存储的数据库。</p>
<p>neo4j就是图数据库，GDBMS的一种。它很适用于遍历大量数据。</p>
<h1 id="_2">数据模型</h1>
<p>属性图模型规则</p>
<ul>
<li>表示节点，关系和属性中的数据</li>
<li>节点和关系都包含属性</li>
<li>关系连接节点</li>
<li>属性是键值对</li>
<li>节点用圆圈表示，关系用方向键表示。</li>
<li>关系具有方向：单向和双向。</li>
<li>每个关系包含“开始节点”或“从节点”和“到节点”或“结束节点”</li>
<li>每个关系都是定向的，若没有方向则会抛出错误</li>
</ul>
<p>图形数据库数据模型是由：节点，关系，属性构成的，就像这样</p>
<p><img alt="属性图的例子" src="https://atts.w3cschool.cn/attachments/day_161224/201612241711466890.jpg" title="属性图的例子" /></p>
<h1 id="cql">CQL</h1>
<p>CQL是Cypher查询语言，Neo4j选用CQL作为查询语言</p>
<h2 id="cql_1">CQL 数据类型</h2>
<p><img alt="image-20210707005515196" src="https://const27blog.oss-cn-beijing.aliyuncs.com/img/image-20210707005515196.png" title="image-20210707005515196" /></p>
<h2 id="createmerge">CREATE\&amp;MERGE</h2>
<p>CREATE  用于创建节点，关系，以及为节点或关系添加标签</p>
<pre><code class="language-纯文本">创建无属性节点：CREATE (&lt;node-name&gt;:&lt;label-name&gt;)
CREATE (&lt;node-name&gt;:&lt;label-name1&gt;:&lt;label-name2&gt;.....:&lt;label-namen&gt;) 创建多个标签到节点
</code></pre>
<p>node-name : 节点名
lable-name: 标签名，我们一般用标签名来访问某个节点的详细信息</p>
<pre><code class="language-纯文本">创建有属性节点：
CREATE (
   &lt;node-name&gt;:&lt;label-name&gt;
   {   
      &lt;Property1-name&gt;:&lt;Property1-Value&gt;
      ........
      &lt;Propertyn-name&gt;:&lt;Propertyn-Value&gt;
   }
)
</code></pre>
<p>: : 键值对，name为属性名，value为属性值</p>
<p>而MERGE和CREATE是差不多的，唯一区别是MERGE在插入新的节点，属性或关系时会先检索数据库，若添加到是重复项则不会添加，不重复才会添加。
具体语法与CREATE一致</p>
<pre><code class="language-纯文本">MERGE (
   &lt;node-name&gt;:&lt;label-name&gt;
   {   
      &lt;Property1-name&gt;:&lt;Property1-Value&gt;
      ........
      &lt;Propertyn-name&gt;:&lt;Propertyn-Value&gt;
   }
)
</code></pre>
<h2 id="set">SET</h2>
<p>SET用于添加新属性</p>
<pre><code class="language-纯文本">常用：MATCH (test:TestDB) SET test.age=10 return TestDB
</code></pre>
<h2 id="matchreturn">MATCH\&amp;RETURN</h2>
<p>从数据库获得节点，关系，属性的数据</p>
<pre><code class="language-纯文本">MATCH 
(
   &lt;node-name&gt;:&lt;label-name&gt;
) return &lt;node-name&gt;.&lt;propertyn-name&gt;
</code></pre>
<p>值得注意的是，MATCH和RETURN函数不能单独使用，常配合使用，如。</p>
<pre><code class="language-纯文本">MATCH(dept:Dept) return dept  //查询Dept下的内容

MATCH(dept:Dept) return dept.location  //查询Dept下的所有location属性

# 查询Employee标签下 id=123，name=&quot;Lokesh&quot;的节点
MATCH (p:Employee {id:123,name:&quot;Lokesh&quot;}) RETURN p
</code></pre>
<h2 id="_3">关系</h2>
<p>Neo4j的节点间有两种关系：单向关系与双向关系。其被用作来描述节点与节点之间的关系</p>
<pre><code class="language-纯文本">CREATE (&lt;node1-name&gt;:&lt;label1-name&gt;)-
  [&lt;relationship-name&gt;:&lt;relationship-label-name&gt;]
  -&gt;(&lt;node2-name&gt;:&lt;label2-name&gt;)
  创建新节点与新关系
</code></pre>
<pre><code class="language-纯文本">MATCH (a:Chinese),(b:Dog) 
where a.name=&quot;Yangfan&quot; AND b.name=&quot;ergu&quot; 
create (a)-[r:Relationship{ref:&quot;Leader&quot;}]-&gt;(b)
return r
从现有节点创建关系
</code></pre>
<h2 id="where">WHERE</h2>
<p>和MYSQL的where语句很类似，即MATCH查询的限制函数</p>
<pre><code class="language-纯文本">WHERE &lt;property-name&gt; &lt;comparison-operator&gt; &lt;value&gt; 简单的WHERE子句
</code></pre>
<p>它是节点或关系的属性名称。</p>
<p>比较运算符</p>
<p>&#x20;值</p>
<h2 id="deleteremove">DELETE\&amp;REMOVE</h2>
<p>DELETE用于删除节点或关系</p>
<pre><code class="language-纯文本">常用： MATCH(e:Employee) DELETE e
</code></pre>
<p>REMOVE用于删除属性</p>
<pre><code class="language-纯文本">常用：MATCH (book { id:122 }) REMOVE book.price
</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../../../%E6%9D%82%E6%8A%80/%E6%9D%82%E6%8A%80/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../../../%E6%9D%82%E6%8A%80/%E6%9D%82%E6%8A%80/" class="btn btn-xs btn-link">
        杂技
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../%E5%BC%80%E5%8F%91/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../%E5%BC%80%E5%8F%91/" class="btn btn-xs btn-link">
        开发
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>